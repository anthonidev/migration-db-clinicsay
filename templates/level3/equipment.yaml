# ============================================================
# TEMPLATE: EQUIPMENT (Nivel 3)
# ============================================================
# Equipos o dispositivos necesarios para sesiones clínicas.
# Ejemplos: láser, ultrasonido, rayos X, aparatos de presoterapia.
# Son recursos agendables que pueden tener restricciones de uso.
#
# DEPENDENCIAS (deben existir antes):
#   - Clinic (Level 1) → clinic_id
#   - Site (Level 2) → site_id
#
# REFERENCIA: docs/DOMAIN/resources/equipment.md
# ============================================================

equipment:

  # ------------------------------------------------------------
  # EJEMPLO 1: Equipo completo (láser estético)
  # ------------------------------------------------------------
  - # ==========================================================
    # CAMPOS REQUERIDOS (NOT NULL)
    # ==========================================================

    # REQUERIDO: ID de la clínica
    clinic_id: "{{clinic_id}}"  # UUID de la clínica

    # REQUERIDO: ID de la sede donde está el equipo
    site_id: "{{site_id}}"  # UUID de la sede

    # REQUERIDO: Nombre del equipo
    name: "Láser Diodo Soprano"  # Nombre identificativo

    # ==========================================================
    # CAMPOS CON DEFAULT (opcionales, tienen valor por defecto)
    # ==========================================================

    # Políticas de programación asociadas
    # UUIDs de SchedulingPolicy con scopeType = EQUIPMENT
    scheduling_policy_ids: []  # DEFAULT: []

    # Estado del registro (ciclo de vida)
    # Valores: ACTIVE (default), INACTIVE, ARCHIVED, DELETED
    record_status: "ACTIVE"  # DEFAULT: "ACTIVE"

    # ==========================================================
    # CAMPOS OPCIONALES (nullable)
    # ==========================================================

    # ID único del equipo
    # Si es null, se genera automáticamente (UUID)
    id: null  # Ej: "550e8400-e29b-41d4-a716-446655440000"

    # Descripción del equipo
    # Especificaciones técnicas, instrucciones de uso, etc.
    description: "Láser de diodo 810nm para depilación. Potencia máxima 1200W."

    # URL de foto del equipo
    # Para identificación visual en listados
    photo_url: null  # Ej: "https://storage.clinicsay.com/equipment/laser-soprano.jpg"

    # ID del tipo de equipo (catálogo)
    # Referencia a un catálogo de tipos de equipos
    equipment_type_id: null  # Ej: "laser_depilacion"

    # Metadata del registro (ciclo de vida)
    record_metadata: null  # Ej: {"archivedAt": "2024-01-15T10:00:00Z"}

    # Metadata adicional personalizada
    metadata: null  # Ej: {"serial_number": "SN123456", "warranty_until": "2026-12-31"}

  # ------------------------------------------------------------
  # EJEMPLO 2: Equipo mínimo (solo campos requeridos)
  # ------------------------------------------------------------
  - clinic_id: "{{clinic_id}}"
    site_id: "{{site_id}}"
    name: "Ultrasonido"

  # ------------------------------------------------------------
  # EJEMPLO 3: Equipo con metadata completa
  # ------------------------------------------------------------
  - clinic_id: "{{clinic_id}}"
    site_id: "{{site_id}}"
    name: "Rayos X Digital"
    description: "Equipo de radiografía digital panorámica. Uso exclusivo por personal certificado."
    equipment_type_id: "rayos_x"
    record_status: "ACTIVE"
    metadata:
      brand: "Carestream"
      model: "CS 8100"
      serial_number: "RX-2024-001"
      purchase_date: "2024-01-15"
      warranty_until: "2027-01-15"
      maintenance_schedule: "trimestral"
      last_maintenance: "2025-10-01"
      certified_operators:
        - "Dr. García"
        - "Dra. López"

  # ------------------------------------------------------------
  # EJEMPLO 4: Equipo inactivo (en mantenimiento)
  # ------------------------------------------------------------
  - clinic_id: "{{clinic_id}}"
    site_id: "{{site_id}}"
    name: "Presoterapia Ballancer Pro"
    description: "Equipo de presoterapia. EN MANTENIMIENTO hasta 2025-02-01."
    record_status: "INACTIVE"
    metadata:
      maintenance_reason: "Cambio de mangueras"
      expected_return: "2025-02-01"

# ============================================================
# NOTAS DE MIGRACIÓN
# ============================================================
#
# 1. ORDEN DE CREACIÓN:
#    - Primero debe existir la Clinic (Level 1)
#    - Luego debe existir el Site (Level 2)
#    - Finalmente crear Equipment (Level 3)
#
# 2. VALIDACIONES:
#    - site_id debe pertenecer a la misma clinic_id
#    - name debe ser único por site_id (recomendado)
#    - scheduling_policy_ids debe contener UUIDs válidos de SchedulingPolicy
#
# 3. METADATA SUGERIDA:
#    - serial_number: Número de serie del equipo
#    - brand: Marca del equipo
#    - model: Modelo del equipo
#    - purchase_date: Fecha de compra
#    - warranty_until: Fecha fin de garantía
#    - maintenance_schedule: Frecuencia de mantenimiento
#    - last_maintenance: Última fecha de mantenimiento
#    - certified_operators: Lista de operadores certificados
#
# 4. ESTADOS TÍPICOS:
#    - ACTIVE: Equipo operativo y disponible
#    - INACTIVE: En mantenimiento o fuera de servicio temporal
#    - ARCHIVED: Equipo dado de baja definitivamente
#
# 5. CAMPOS AUTO-GENERADOS (no incluir):
#    - created_at: timestamp de creación
#    - updated_at: timestamp de actualización
#
# ============================================================
# RESUMEN DE CAMPOS
# ============================================================
#
# REQUERIDOS (3):
#   - clinic_id
#   - site_id
#   - name
#
# CON DEFAULT (2):
#   - scheduling_policy_ids: []
#   - record_status: "ACTIVE"
#
# OPCIONALES (6):
#   - id
#   - description
#   - photo_url
#   - equipment_type_id
#   - record_metadata (JSONB)
#   - metadata (JSONB)
#
# ============================================================
# VALORES DE ENUMS
# ============================================================
#
# record_status:
#   - ACTIVE: Activo y operativo
#   - INACTIVE: Inactivo temporalmente (mantenimiento)
#   - ARCHIVED: Archivado (soft delete)
#   - DELETED: Eliminado (deprecado, usar ARCHIVED)
#
# equipment_type_id (ejemplos de catálogo):
#   - laser_depilacion: Láser para depilación
#   - laser_co2: Láser CO2 para tratamientos
#   - ultrasonido: Equipo de ultrasonido
#   - rayos_x: Equipo de radiografía
#   - presoterapia: Equipo de presoterapia
#   - radiofrecuencia: Equipo de radiofrecuencia
#   - crioterapia: Equipo de crioterapia
#   - electroestimulacion: Equipo de electroestimulación
#
# ============================================================
